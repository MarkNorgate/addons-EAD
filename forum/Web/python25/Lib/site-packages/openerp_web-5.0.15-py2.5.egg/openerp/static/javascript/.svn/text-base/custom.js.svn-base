String.prototype.toArr = function() {
	if (this == '')
		return this;
	eval("var obj = " + this);
	return obj ? obj : [];
};

var mobility_func = {
	updateState : function() {
		if ($('state') != null && $('forum_referrence_no') != null) {
			$('_notebook_1').innerHTML = '<div style="float:right;margin-right:20px">Status: '
					+ $('state').value + '</div>' + $('_notebook_1').innerHTML;
			// $('btn_notify_mc').style.float = 'right';
		}
	},
	updateGUI : function(element) {
		obj = document.getElementsByTagName(element);
		for (i = 0, len = obj.length; i < len; i++) {
			var context = obj[i].getAttribute('context');
			if (context != undefined) {
				context = context.toArr();
				for (c in context) {
					obj[i].style[c] = context[c];
				}
			}
		}
	},
	updateParent : function(dummy_field) {
		$(dummy_field).value = $('_terp_parent_id').value;
	},
	updateTitle : function() {
		if ($('title_text') != undefined) {
			$('title_text').innerHTML = $('header_title').innerHTML + ' - ';
		}
	},
    closeCreate : function(){
        if(location.pathname == '/openo2m/save'){
        	setTimeout(function() {
        	    window.close();
        	   }, 2000);
        }
    }
};
try {
	mobility_func.updateParent($('_terp_o2m').value + '/parent_id');
} catch (e) {
}

mobility_func.closeCreate();
mobility_func.updateTitle();
mobility_func.updateGUI('button');
mobility_func.updateGUI('input');
mobility_func.updateGUI('select');